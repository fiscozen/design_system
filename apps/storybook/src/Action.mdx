import { Meta, Controls, Markdown } from '@storybook/addon-docs/blocks'
import { FzAction } from '@fiscozen/action'

<Meta title="Navigation/FzAction/Documentation" component={FzAction} />

# FzAction

The FzAction component is a versatile navigation and interaction element designed to navigate between pages or trigger actions in menus and lists. It supports both button and link functionality with multiple layout variants and environments.

## Overview

FzAction provides a consistent way to create interactive elements across the application. It can function as either a button for triggering actions or a link for navigation, with support for different environments (backoffice/frontoffice) and layout variants (textLeft/textCenter/onlyIcon).

### Key Features

- **Dual Functionality**: Works as both button and link components
- **Environment Support**: Optimized for both backoffice and frontoffice contexts
- **Flexible Layouts**: Multiple variants for different use cases
- **Type-Safe Icon Support**: Type-safe icon properties based on variant:
  - `onlyIcon` variant: uses `iconName` and `iconVariant`
  - `textLeft` and `textCenter` variants: use `iconLeftName`, `iconLeftVariant`, `iconRightName`, and `iconRightVariant`
- **Accessibility**: Built-in disabled states and keyboard navigation
- **Text Handling**: Support for main label and sub-label with truncation options

## Properties

### Core Properties

<Markdown>
  {`
| Property | Type | Default | Description |
|----------|------|---------|-------------|
| \`type\` | \`'action' \| 'link'\` | \`'action'\` | Determines if component renders as button or link |
| \`environment\` | \`'backoffice' \| 'frontoffice'\` | \`'backoffice'\` | Environment variant affecting padding and styling |
| \`variant\` | \`'textLeft' \| 'textCenter' \| 'onlyIcon'\` | \`'textLeft'\` | Layout variant for different use cases |
| \`disabled\` | \`boolean\` | \`false\` | Disables the action and prevents interaction |
| \`isTextTruncated\` | \`boolean\` | \`false\` | Enables text truncation for long content |
`}
</Markdown>

### Content Properties

<Markdown>
  {`
| Property | Type | Default | Description |
|----------|------|---------|-------------|
| \`label\` | \`string\` | - | Main label text (can also use default slot) |
| \`subLabel\` | \`string\` | - | Secondary text displayed below the main label |
`}
</Markdown>

### Accessibility Properties

<Markdown>
  {`
| Property | Type | Default | Description |
|----------|------|---------|-------------|
| \`id\` | \`string\` | - | Unique ID for ARIA relationships |
| \`role\` | \`string\` | - | ARIA role (e.g., \`"option"\`, \`"menuitem"\`) |
| \`ariaSelected\` | \`boolean\` | - | ARIA selected state (for \`role="option"\`) |
| \`focused\` | \`boolean\` | \`false\` | Visual focus state for keyboard navigation |
| \`readonly\` | \`boolean\` | \`false\` | Non-interactive but visually normal (vs disabled) |
`}
</Markdown>

#### Icon Properties (for variant="onlyIcon")

<Markdown>
  {`
| Property | Type | Default | Description |
|----------|------|---------|-------------|
| \`iconName\` | \`string\` | - | Name of the [FzIcon](?path=/docs/media-fzicon--docs) icon (required for onlyIcon variant) |
| \`iconVariant\` | \`IconVariant\` | - | Variant of the [FzIcon](?path=/docs/media-fzicon--docs) icon (required for onlyIcon variant) |
`}
</Markdown>

#### Icon Properties (for variant="textLeft" or variant="textCenter")

<Markdown>
  {`
| Property | Type | Default | Description |
|----------|------|---------|-------------|
| \`iconLeftName\` | \`string\` | - | Name of the left [FzIcon](?path=/docs/media-fzicon--docs) icon (required for textLeft and textCenter variants) |
| \`iconLeftVariant\` | \`IconVariant\` | - | Variant of the left [FzIcon](?path=/docs/media-fzicon--docs) icon (required for textLeft and textCenter variants) |
| \`iconRightName\` | \`string\` | - | Name of the right [FzIcon](?path=/docs/media-fzicon--docs) icon (required for textLeft and textCenter variants) |
| \`iconRightVariant\` | \`IconVariant\` | - | Variant of the right [FzIcon](?path=/docs/media-fzicon--docs) icon (required for textLeft and textCenter variants) |
`}
</Markdown>

### Link Properties (when type="link")

<Markdown>
  {`
| Property | Type | Default | Description |
|----------|------|---------|-------------|
| \`to\` | \`string \| RouteLocation\` | - | Destination for navigation |
| \`replace\` | \`boolean\` | \`false\` | Uses [vue-router](https://router.vuejs.org/) replace instead of push |
| \`target\` | \`string\` | - | Target attribute for external links |
| \`external\` | \`boolean\` | \`false\` | Indicates if link is external |
| \`meta\` | \`CustomRouteLocation\` | - | Metadata for the link |
`}
</Markdown>

## Usage Examples

### Basic Action Button

```vue
<template>
  <FzAction
    label="Save Changes"
    subLabel="Save your current work"
    iconRightName="save"
    @click="handleSave"
  />
</template>
```

### Navigation Link

```vue
<template>
  <FzAction
    type="link"
    to="/dashboard"
    label="Dashboard"
    subLabel="View your overview"
    iconRightName="chart-line"
  />
</template>
```

### Centered Variant for Navigation

```vue
<template>
  <FzAction
    variant="textCenter"
    label="Profile"
    subLabel="Account settings"
    iconRightName="chevron-right"
    @click="openProfile"
  />
</template>
```

### Action with Left and Right Icons

```vue
<template>
  <FzAction
    label="Navigation Item"
    subLabel="With icons on both sides"
    iconLeftName="chevron-left"
    iconRightName="chevron-right"
    @click="navigate"
  />
</template>
```

### Icon-Only Button

```vue
<template>
  <FzAction variant="onlyIcon" iconName="settings" @click="openSettings" />
</template>
```

### External Link

```vue
<template>
  <FzAction
    type="link"
    to="https://help.example.com"
    label="Help Center"
    subLabel="Get support"
    iconRightName="arrow-up-right-from-square"
    external
    target="_blank"
  />
</template>
```

### Disabled State

```vue
<template>
  <FzAction
    label="Delete Item"
    subLabel="This action cannot be undone"
    iconRightName="trash"
    disabled
  />
</template>
```

### Text Truncation

```vue
<template>
  <FzAction
    label="Very Long Label That Should Be Truncated"
    subLabel="Very Long Sub Label That Should Also Be Truncated"
    isTextTruncated
    iconRightName="file"
  />
</template>
```

### As Listbox Option (with ARIA)

```vue
<template>
  <FzActionList role="listbox" aria-labelledby="select-label">
    <FzAction
      type="action"
      variant="textLeft"
      label="Option 1"
      role="option"
      :ariaSelected="selectedValue === 'option1'"
      @click="selectOption('option1')"
    />
    <FzAction
      type="action"
      variant="textLeft"
      label="Option 2"
      role="option"
      :ariaSelected="selectedValue === 'option2'"
      @click="selectOption('option2')"
    />
  </FzActionList>
</template>
```

### As Menu Item (with ARIA)

```vue
<template>
  <FzActionList role="menu">
    <FzAction
      type="action"
      variant="textLeft"
      label="Edit"
      role="menuitem"
      iconLeftName="pen"
      @click="handleEdit"
    />
    <FzAction
      type="action"
      variant="textLeft"
      label="Delete"
      role="menuitem"
      iconLeftName="trash"
      @click="handleDelete"
    />
  </FzActionList>
</template>
```

### Readonly State

```vue
<template>
  <FzAction
    label="Read Only Item"
    subLabel="Cannot be interacted with"
    readonly
  />
</template>
```

## Best Practices

### When to Use Each Variant

- **textLeft**: Use in action lists, dropdown menus, and sidebars where space is limited
- **textCenter**: Use in navigation bars and headers where visual balance is important
- **onlyIcon**: Use in toolbars and compact interfaces where space is at a premium

### Environment Selection

- **backoffice**: Use for internal admin interfaces, management tools, and developer-facing applications
- **frontoffice**: Use for customer-facing interfaces, public pages, and user-facing applications

### Accessibility Guidelines

#### ARIA Roles

Use the `role` prop to define the semantic role of the action:

- **`role="option"`**: For selectable items in a listbox (e.g., dropdown options)
- **`role="menuitem"`**: For items in a menu
- **No role**: For standalone buttons or links (default behavior)

#### ARIA Selected State

When using `role="option"`, always provide `ariaSelected`:

```vue
<FzAction
  role="option"
  :ariaSelected="isSelected"
  label="Option"
/>
```

This ensures screen readers announce the selection state correctly.

#### Keyboard Navigation

- **Enter/Space**: Triggers the action when focused
- **Tab**: Moves focus to next element
- **Arrow keys**: Handled by parent component (e.g., FzSelect, FzMenu)

#### Screen Reader Support

- `aria-disabled`: Always present with explicit `"true"` or `"false"` values
- `aria-selected`: Only added when `role="option"` is set
- `aria-label`: Automatically computed for icon-only variants
- Text truncation: Full text available via `title` attribute for screen readers

## Integration

### Installation

```bash
npm install @fiscozen/action
```

### Import

```typescript
import { FzAction } from '@fiscozen/action'
```

### Additional Resources

- **[Vue.js Documentation](https://vuejs.org/guide/)** - For Vue.js framework reference
- **[Vue Router Documentation](https://router.vuejs.org/)** - For routing functionality
- **[Storybook Documentation](https://storybook.js.org/docs/)** - For Storybook usage

## Related Components

- **[FzLink](?path=/docs/navigation-fzlink--docs)**: For simple text-based navigation
- **[FzButton](?path=/docs/button-fzbutton--docs)**: For primary action buttons
- **[FzIcon](?path=/docs/media-fzicon--docs)**: For standalone icon usage
